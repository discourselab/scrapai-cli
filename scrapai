#!/usr/bin/env python3
"""scrapai - AI-powered web scraping CLI"""

import sys
import os

def auto_activate_venv():
    """Auto-activate virtual environment by re-executing script with venv Python."""
    if hasattr(sys, 'real_prefix') or (hasattr(sys, 'base_prefix') and sys.base_prefix != sys.prefix):
        return
    if os.getenv('SKIP_VENV_CHECK') or os.getenv('AIRFLOW_HOME'):
        return

    script_dir = os.path.dirname(os.path.abspath(__file__))
    for venv_name in ['.venv', 'venv']:
        venv_python = os.path.join(script_dir, venv_name, 'bin', 'python')
        if os.path.exists(venv_python):
            os.execv(venv_python, [venv_python] + sys.argv)
            return

# Auto-activate venv (except for setup/verify which may not have deps yet)
if len(sys.argv) > 1 and sys.argv[1] not in ['setup', 'verify', '--help', '-h']:
    auto_activate_venv()

sys.path.insert(0, os.path.dirname(os.path.abspath(__file__)))

from cli import cli  # noqa # type: ignore

if __name__ == '__main__':
    cli()
